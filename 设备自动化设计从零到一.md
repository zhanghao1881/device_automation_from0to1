# 设备自动化设计从0到1

>Author: [WeoLee](http://weolee.com)
>
>Created: 2016-11-08
>
>state:unfinished

[TOC]
<div style="page-break-after: always;"></div>

## 课时1-2

##前言

​	作为一线教师和机器人创新实验室指导老师及一线项目参与者，作者深知大学各专业间的隔阂造成了产品总体设计上人才的缺失，导致国内整体设计水平低下，原因分析如下：

一个典型的机电一体化产品不可避免的包含：**机械结构设计**、**控制系统设计**、**软件设计**、**外观设计**等。

1. 机械结构设计等必然是要求机械相关专业的人来完成，但问题在于机械专业课程繁重，**电子电工学**、**程序设计**等犹如走马观花，平时缺少兴趣和足够的练习时间，导致不足百分之一的学生能够在软硬件设计上达到能够设计的程度。机械设计是一个学习周期非常长的领域，入门看似容易，实则非常困难，需要非常多的经验进行铺垫，导致虽然大学有机电工程等看似和机械挂靠很紧密的专业，但实际上**机械设计方向除了纯粹的机制专业外，其它专业几乎不可能完成相关工作**。当然如果其它专业学生自学完全部机制方面课程也应该算是机制的学生了。
2. 自动化、机电相关专业学生控制系统设计为本行，稍加兴趣和勤奋进行设计应该不难，但是大学专业可能多半仅限于八位单片机系统设计，教材又是重复了若干年的老掉牙的读物，程序设计几乎仅仅是能够工作而已，很少会顾及代码格式及运行效率的问题，更鲜有稍大规模系统设计经验的学习，所以实际上代码能写的好的学生寥寥无几。
3. 计算机专业的学生理所应当代码应该写的很好，实则不然，笔者看过很多数据统计，普通本科院校几乎百分之九十的计算机专业毕业学生会从事前端开发，像核心课程《操作系统》，《编译原理》能学的好的学生也同样少之又少，要是跟硬件挂钩，更是全民公敌。

​        例子多的数不胜数，专业之间的隔阂程度如此之大令人吃惊，因为对其它专业的不了解，以至于会深刻的影响到产品设计时的团队协作。一个好的机电产品，必然是要各方面精益求精，协同设计，而不是各个部分暴力的拼接。所以笔者一直觉得十分有必要产生一门课程，给低年级学生以指导，让其能够快速的对以后可能有影响的相关专业进行必要的了解，只要方向对了，以后自己在根据自己喜好进行一些侧重，势必会对自己今后工作上给予很大的帮助。

​	之前提到机械需要较多经验，所以建议机械的东西还是机制的人来做，所以机械方向的东西我就不谈，外观的东西除了在极限设计的情况下，一般来讲跟产品功能的耦合度也较低，所以直接由工业设计相关专业人员完成即可。剩下的就是控制和代码的问题了，所以本内容适用范围为：**有兴趣了解机电产品设计整个流程的初级人员**。具体的来讲，机械相关学生适合全文通读，自动化相关学生可以直接看提高篇，计算机相关学生可以侧重看看初级篇和中级篇。

​	本教程非常基础，初期规划了8个课时，目的在于抛砖引玉，给由兴趣的学生以指引。整个内容托管在github上，地址为：https://github.com/winxos/device_automation_from0to1 ，如有任何疑问或建议，或者内容的添加等，欢迎到Issues提交，希望大家一起来分享知识，给新人创造更好的学习环境。

<div style="page-break-after: always;"></div>

## 初级篇

### 原理图

原理图，是表示电路板上各器件之间连接关系的图表。

![51mini](.\images\51mini.jpg)

### PCB图

PCB图详细描绘了电路板的走线，元件的尺寸及位置等，目前最常用的软件为 **Altium Designer**。

![51pcb](.\images\51pcb.jpg)

<div style="page-break-after: always;"></div>

### PCB生产过程

PCB制作方法主要有**热转印法**，**感光湿膜法，感光干膜法**。详细的生产工艺大家自行搜索解决，**热转印+氯化铁腐蚀**是自己手工制作的最佳首选，大致上分为几个步骤：

#### 1. 打印pcb至热转印纸

![hot_trans](.\images\hot_trans.jpg)

#### 2. 转印至铜板

![hoter](.\images\hoter.png)

![coper](.\images\coper.jpg)

#### 3. 腐蚀

![pcb_make](.\images\pcb_make.jpg)

<div style="page-break-after: always;"></div>

#### 4. 清洗及钻孔

![coper2](.\images\coper2.jpg)

当然，工业上面工艺要复杂很多，还要刷阻焊油墨、印丝层等才能做出像下面的效果。

![arduino_uno](.\images\arduino_uno.png)

在小批量生产的时候，我们只需要将PCB文件发给制造厂商，便能做出像上面一样的电路板，这个过程叫**打样**。厂家推荐深圳**嘉立创**，可以自助下单，打样质量高，速度快。

<div style="page-break-after: always;"></div>

### **芯片封装**

所谓封装是指安装半导体集成电路芯片用的外壳，它不仅起着安放、固定、密封、保护芯片和增强导热性能的作用，而且还是沟通芯片内部世界与外部电路的桥梁--芯片上的接点用导线连接到封装外壳的引脚上，这些引脚又通过印刷电路板上的导线与其他器件建立连接。

常用的芯片封装形式有：

#### DIP双列直插式 (Dual In-LINE PACKAGE)

绝大多数中小规模集成电路(IC)均采用这种封装形式，其引脚数一般不超过100个。采用DIP封装的CPU芯片有两排引脚，需要插入到具有DIP结构的芯片插座上。

![dip](.\images\dip.jpg)

#### QFP塑料方型扁平式 (Plastic Quad Flat PACKAGE)

芯片引脚之间距离很小，管脚很细，一般大规模或超大型集成电路都采用这种封装形式，其引脚数一般在100个以上。用这种形式封装的芯片必须采用贴片机将芯片与主板焊接起来。

![qfp](.\images\qfp.jpg)

#### PGA插针网格式 (Pin Grid Array PACKAGE)

芯片的内外有多个方阵形的插针，每个方阵形插针沿芯片的四周间隔一定距离排列。根据引脚数目的多少，可以围成2-5圈。安装时，将芯片插入专门的PGA插座。

![pga](.\images\pga.jpg)

#### BGA球栅阵列式 (BALL Grid Array PACKAGE)

现今大多数的高脚数芯片（如图形芯片与芯片组等）皆转而使用BGA(BALL Grid Array PACKAGE)封装技术。BGA一出现便成为CPU、主板上南/北桥芯片等高密度、高性能、多引脚封装的最佳选择。

![bga](.\images\bga.jpg)

还有很多各式各样的封装形式，详情大家可以自行搜索了解。

随着集成度的增加，封装形式也发生着很大的变化，对于一般机电产品来讲，DIP和QFP形式的封装是使用最多的。
<div style="page-break-after: always;"></div>
### Arduino入门
#### Arduino简介

Massimo Banzi 之前是意大利 Ivrea 一家高科技设计学校的老师。他的学生们经常抱怨找不到便宜好用的微控制器。2005年冬天， Massimo Banzi 跟David Cuartielles 讨论了这个问题。David Cuartielles 是一个西班牙籍芯片工程师，当时在这所学校做访问学者。两人决定设计自己的电路板，并引入了Banzi 的学生 David Mellis 为电路板设计编程语言。两天以后，David Mellis 就写出了程式码。又过了三天，电路板就完工了。这块电路板被命名为**Arduino**。几乎任何人，即使不懂电脑编程，也能用 **Arduino** 做出很酷的东西，比如对传感器作出回应，闪烁灯光，还能控制马达。

随后Banzi，Cuartielles，和Mellis把设计图放到了网上。版权法可以监管开源软件，却很难用在硬件上，为了保持设计的开放源码理念，他们决定采用Creative Commons(CC)的授权方式公开硬件设计图。在这样的授权下．任何人都可以生产电路板的复制品，甚至还能重新设计和销售原设计的复制品。人们不需要支付任何费用，甚至不用取得Arduino团队的许可。然而，如果重新发布了引用设计，就必须声明原始Arduino团队的贡献。如果修改了电路板，则最新设计必须使用相同或类似的Creative Commons(CC)的授权方式，以保证新版本的Arduino电路板也会一样是自由和开放的。唯一被保留的只有**Arduino**这个名字，它被注册成了商标，在没有官方授权的情况下不能使用它。**Arduino**发展至今，已经有了多种型号及众多衍生控制器推出。

![arduino_uno2](.\images\arduino_uno2.png)

#### Arduino特点

##### **跨平台**

​	Arduino IDE可以在Windows、Macintosh OS X、Linux三大主流操作系统上运行，而其他的大多数控制器只能在Windows上开发。

##### **简单清晰**

​	Arduino IDE基于**processing** IDE开发，processing 是MIT 开发的一款编程语言，目的是让艺术家也能够学会用程序来表达自己。对于初学者来说，极易掌握，同时有着足够的灵活性。Arduino语言基于c++语言开发，同时包含了大量的框架库，使用起来非常的简单。

##### **开放性**

​	Arduino的硬件原理图、电路图、IDE软件及核心库文件都是开源的，在开源协议范围内里可以任意修改原始设计及相应代码。

##### **发展迅速**

​	2012年笔者在**《机器人创新实验》**课程中采用Arduino进行教学，那时Arduino中文书籍jd搜索只有2部，现在(2016)已经可以搜索出近百种。而且Arduino UNO国产板的价格已经从当年60左右降到了现在的10来块，各个模块也都出现急剧降价，*说明Arduino的使用量在成倍的增加*。在中小学的教育中，Arudino的使用也如同雨后春笋般发展。因为Arduino的种种优势，越来越多的专业硬件开发者已经或开始使用Arduino来开发他们的项目、产品；越来越多的软件开发者使用Arduino进入硬件、物联网等开发领域；大学里，自动化、软件，甚至艺术专业，也纷纷开展了Arduino相关课程。
<div style="page-break-after: always;"></div>
### 常用执行元件

- 直流电机

   ![dcmotor](images\dcmotor.jpg)

  直流电机应用比较广泛，启动力矩大，规格多，可以直接使用pwm来进行速度控制，通常要配合行程开关来进行使用。

- 步进电机

   ![stepper](images\stepper.jpg)

  步进电机通常需要配合步进电机控制器使用，常用于控制精度要求较高的场合，价格较贵。

  ​

- 舵机

   ![server](images\server.jpg)

  舵机常用于转角非周转的场合，一般输出角度为0-180°。可细分为模拟舵机和数字舵机。其中数字舵机自带控制电路，响应速度快，精度高，价格较贵。

- 伺服电机

   ![server2](images\server2.png)

  伺服电机一般用于位置、速度、加速度控制精度有高要求的场合，使用简单，价格非常贵。

- 电磁铁

   ![magnet](images\magnet.jpg)

  电磁铁通电就可以产生直线位移，驱动力一般，价格便宜，不能长期（数十秒）处于通电状态。

- 电动推杆

   ![rod](images\rod.JPG)

  一种直线驱动元件，内部集成了行程开关，驱动力大，到位后会自动断电。

<div style="page-break-after: always;"></div>

### 常用传感器

- #### 行程开关

   ![switch](images\switch.jpg)

  行程开关常用于机器回到初始位置以及经过检测，寿命长。

- #### 环境温湿度传感器

   ![dht11](images\dht11.png)

  用于要求不高的环境温湿度检测，单总线通信方式，精度一般。

- #### 热电偶传感器

   ![thermal](images\thermal.jpg)

  利用热电效应制成，用于高温环境检测。

- #### 霍尔传感器

   ![hall](images\hall.png)

  利用霍尔效应制成，一般用于经过检测，或者高精度距离检测，检测距离较短。

- #### 红外接近传感器

   ![red](images\red.png)

  利用红外线反射原理制成，一般用于经过检测，检测范围一般最大数十厘米，易受灰尘等影响。

- #### 超声波测距模块

   ![sonar](images\sonar.png)

  利用超声波反射原理制成，一般用于障碍检测，检测范围一般最大数米，对反射面大小及发射角度有要求。

  ​

- #### 悬臂梁称重模块

   ![weight](images\weight.jpg)

  利用悬臂梁受力弯曲原理制成，精度较高，量程一般数千克。

   ![weight2](images\weight2.jpg)

  体重秤称重模块，精度较低，价格便宜。

  ​

<div style="page-break-after: always;"></div>

### 常用显示模块

- #### LED

  ####  ![led](images\led.jpg)

LED一般用于指示灯，如利用闪烁频率的控制表示工作状态、故障情况，也可以用于信号传输（类似遥控器原理）。

- #### LED点阵

  ####  ![ledm](images\ledm.jpg)

广告牌用的较多，有专用的控制器及整套解决方案。

- #### LCD2004/LCD2004 I2C

字符屏在产品中使用较多，根据需求有多种规格可以选择，常用的2004表示可以显示20 $\times$ 4的英文字符，12864 表示可以显示 128 $\times$ 64 个像素点。

![2004](.\images\2004.jpg)

LCD2004

![12864](.\images\12864.jpg)

LCD12864



- #### 段式液晶

![seg](.\images\seg.jpg)

段式液晶一般用于正式产品，可以根据自身需求定做显示内容，每一段可以单独控制。

- #### oled屏

![oled](images\oled.jpg)

oled显示效果好，能够自发光，控制相对复杂，价格贵。

- #### 串口屏

![serial_screen](.\images\serial_screen.jpg)

串口屏只需要串口进行控制，集成了微处理器进行串口自定义命令解析，显示效果好，开发周期短，可以集成触摸屏，价格便宜。

### 推荐购买清单

​	俗话说动手操作是最好的学习方式，所以这里笔者根据多年教学经验，推荐了一些购买清单，大家可以根据自己情况进行选择性购买。这份清单是笔者教授**《机器人创新实验》**课程时对学生的建议，利用清单上的物品，大家可以做出**智能避障移动机器人**，**智能巡线移动机器人**，**智能温湿度采集器**等简易的自动化设备，能够让初学者尽快的熟悉设备自动化的核心原理。

[arduino学习购买清单.docx](https://github.com/winxos/device_automation_from0to1/raw/master/arduino%E5%AD%A6%E4%B9%A0%E8%B4%AD%E4%B9%B0%E6%B8%85%E5%8D%95.docx)

[电子制作工具购买清单.docx](https://github.com/winxos/device_automation_from0to1/raw/master/%E7%94%B5%E5%AD%90%E5%88%B6%E4%BD%9C%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7%E8%B4%AD%E4%B9%B0%E6%B8%85%E5%8D%95.docx)

> 注意：因商家原因，清单中的链接并不保证时效性，所以如果哪个链接失效了，请自行根据链接附带的图片重新寻找该物品。

<div style="page-break-after: always;"></div>

## 课时3-5 

## Arduino制作智能小车

### 小车底盘拼装

 ![car](images\car.png)

### 红外对管安装

 ![red2](images\red2.jpg)

### LCD2004安装

 ![20042](images\20042.jpg)

### 驱动板安装

 ![driver](images\driver.jpg)

<div style="page-break-after: always;"></div>

### Arduino IDE

 ![arduino1](images\arduino1.png)

Arduino IDE界面非常简洁，基于Processing IDE进行开发的，写入代码只需要一键就可以完成。

 ![arduino2](images\arduino2.png)

对初学者来说，Arduino最大的好处就是提供了大量的库供大家使用，几乎市面上常见的外设都能找到人家写好的驱动库，而且全部都是开源的，这样一来省了很多写代码的时间，二来可以学习人家代码是如何编写的，对大家编程水平提高会有重大帮助。

 ![arduino3](images\arduino3.png)

当Arduino 接入电脑后，需要先装好驱动，驱动跟Arduino 芯片密切相关，卖家都会提供，等以后熟悉了也可以直接根据Arduino上的USB转串口芯片来进行相应的驱动安装。驱动安装完后，在设备管理器当中就能看到Arduino对应的串口号。

装好驱动后，还需要设置开发板类型，以及端口号。

 ![arduino4](images\arduino4.png)

Arduino IDE集成了在线库管理器，点击上面就可以打开官方提供的很多Arduino库参考。

 ![arduino5](images\arduino5.png)

根据需要搜索自己需要的驱动，安装完后就可以使用这些库了。

<div style="page-break-after: always;"></div>

### Arduino语法学习

#### Serial 代码分析

```c++
void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
}

void loop() {
  // put your main code here, to run repeatedly:
  Serial.println("I LOVE ARDUINO!");
}
```







#### Blink 代码 分析

```c++
void setup() {
  pinMode(13, OUTPUT);
}
void loop() {
  digitalWrite(13, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);              // wait for a second
  digitalWrite(13, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);              // wait for a second
}
```
<div style="page-break-after: always;"></div>

#### Fade 代码分析

```c++
int led = 9;           // the PWM pin the LED is attached to
int brightness = 0;    // how bright the LED is
int fadeAmount = 5;    // how many points to fade the LED by
// the setup routine runs once when you press reset:
void setup() {
  // declare pin 9 to be an output:
  pinMode(led, OUTPUT);
}
// the loop routine runs over and over again forever:
void loop() {
  // set the brightness of pin 9:
  analogWrite(led, brightness);
  // change the brightness for next time through the loop:
  brightness = brightness + fadeAmount;
  // reverse the direction of the fading at the ends of the fade:
  if (brightness == 0 || brightness == 255) {
    fadeAmount = -fadeAmount ;
  }
  // wait for 30 milliseconds to see the dimming effect
  delay(30);
}
```
<div style="page-break-after: always;"></div>

#### ReadAnalogVoltage 代码分析

```c++
/*
  ReadAnalogVoltage Reads an analog input on pin 0, converts it to voltage, and prints the result to the serial monitor.
  Graphical representation is available using serial plotter (Tools > Serial Plotter menu)
  Attach the center pin of a potentiometer to pin A0, and the outside pins to +5V and ground.
  This example code is in the public domain.
*/
// the setup routine runs once when you press reset:
void setup() {
  // initialize serial communication at 9600 bits per second:
  Serial.begin(9600);
}
// the loop routine runs over and over again forever:
void loop() {
  // read the input on analog pin 0:
  int sensorValue = analogRead(A0);
  // Convert the analog reading (which goes from 0 - 1023) to a voltage (0 - 5V):
  float voltage = sensorValue * (5.0 / 1023.0);
  // print out the value you read:
  Serial.println(voltage);
}
```

<div style="page-break-after: always;"></div>

#### LCD 2004 I2C 代码分析

```c++
//YWROBOT
//Compatible with the Arduino IDE 1.0
//Library version:1.1
#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 20, 4); // set the LCD address to 0x27 for a 16 chars and 2 line display

void setup()
{
  lcd.init();                      // initialize the lcd
  lcd.init();
  // Print a message to the LCD.
  lcd.backlight();
  lcd.setCursor(3, 0);
  lcd.print("Hello, world!");
  lcd.setCursor(2, 1);
  lcd.print("Ywrobot Arduino!");
  lcd.setCursor(0, 2);
  lcd.print("Arduino LCM IIC 2004");
  lcd.setCursor(2, 3);
  lcd.print("Power By Ec-yuan!");
}
void loop()
{
}
```

<div style="page-break-after: always;"></div>

#### Adafruit Motor shield library MotorTest代码分析

```c++
// Adafruit Motor shield library
// copyright Adafruit Industries LLC, 2009
// this code is public domain, enjoy!
#include <AFMotor.h>
AF_DCMotor motor(4);
void setup() {
  Serial.begin(9600);           // set up Serial library at 9600 bps
  Serial.println("Motor test!");
  // turn on motor
  motor.setSpeed(200);
  motor.run(RELEASE);
}
void loop() {
  uint8_t i;
  Serial.print("tick");
  motor.run(FORWARD);
  for (i = 0; i < 255; i++) {
    motor.setSpeed(i);
    delay(10);
  }
  for (i = 255; i != 0; i--) {
    motor.setSpeed(i);
    delay(10);
  }
  Serial.print("tock");
  motor.run(BACKWARD);
  for (i = 0; i < 255; i++) {
    motor.setSpeed(i);
    delay(10);
  }
  for (i = 255; i != 0; i--) {
    motor.setSpeed(i);
    delay(10);
  }
  Serial.print("tech");
  motor.run(RELEASE);
  delay(1000);
}
```

<div style="page-break-after: always;"></div>

#### Arduino语法规则

通过以上分析，对Arduino语法规则应该有了大致的了解，实际上Arduino语法就是C++语法，然后集成了一些已经编制好的系统函数供大家使用。

#### Arduino常用函数

* pinMode()
* digitalRead()
* digitalWrite()
* analogRead()
* analogWrite()
* delay()
* delayMicroseconds()
* pulseIn()

更多内容请参考：https://www.arduino.cc/en/Reference/HomePage

### 避障小车制作

#### 课后作业

**设计一款避障小车**

#### 任务要求

1. 利用红外对管或者超声波传感器进行障碍检测；
2. 利用LCD 2004进行信息显示，如是否检测到障碍，当前车子运行状态等；
3. 遇到问题请争取自行通过搜索引擎解决；

<div style="page-break-after: always;"></div>

## 课时6-8

##中级篇 
### 微控制器主要厂商

 ![mcu](images\mcu.png)

- 排名第一的瑞萨为日立与三菱半导体部门合并成立，在汽车等行业市场独占鳌头。

- 排名第二的恩智浦半导体前身为皇家飞利浦公司部门之一，在通信，汽车，NFC，电视盒，手机等领域使用较多，2015年3月以118亿美金收购摩托罗拉子公司飞思卡尔半导体，于2016年10月被高通以470亿美金收购。

- 排名第三的微芯科技在8位单片机，EEPROM存储芯片等市场份额较大，其主打产品PIC系列使用量非常大。2015年5月以36亿美金收购Atmel公司，Arduino UNO主处理器atmaga328p就是Atmel公司AVR单片机系列的8位处理器产品。

- 排名第四的意法半导体为意大利SGS半导体和法国Thomson半导体公司合并而成，其STM32各系列产品使用特别广泛。

- 剩下的几个也都是巨无霸，例如TI的MSP430系列非常经典，自己以后可以根据需求进行相应了解。


### 控制方案设计步骤

#### 1. 需求分析

硬件运行环境？工况？抗核辐射？

软件运行环境？是否有特殊要求？

任务实时性要求？

任务数据存储量？

是否需要接入以太网？蓝牙是否可以？

模拟量采样速度是否有特殊要求？

交互性是否有特殊考虑？

#### 2. 微控制器选型

8位单片机？32位单片机？PC机？

任务执行速度是否有特殊要求？

抗干扰性是否有特殊要求？

是否需要特殊功能？

有多少外设？需要多少IO口？

需要多少串口？

需要多少存储空间？多少代码空间？

#### 3. 最小系统设计

1. 选好MCU型号后，网上可以找到最小系统设计原理图。建议熟悉几款常用的MCU，这样代码以后可以互用，遇到问题网上参考资料也比较多。

2. 对于初次使用的MCU，建议初期先到网上购买相应MCU的最小系统开发板，先行进行MCU相应编程环境及特性的熟悉，熟练操作IO口，中断等编程，等等。

3. 然后再参考最小系统设计添加自己所需的其他外围电路原理图，制作PCB图。

4. 初版打样，在嘉立创打样可以同时自动购买相应的元器件，拿到板子后进行焊接，运行最简单的代码以确保电路板设计没有什么问题，如果遇到问题，看是否可以通过手工搭飞线、划断线路等手段手工修复，最后再一起统一修改设计，如果不能则修改相应电路原理图及PCB图，再次打板，重复此步骤。

5. 软件设计要考虑的因素更多，和硬件设计一样，需要非常多的经验，所以需要持续的进行资料阅读、学习。

6. 总体来讲，一个好的设计，应该至少具备以下特性：

   1. 系统稳定：能够进行基本异常处理，尽可能多的考虑未知环境；
   2. 容易扩展：添加新的功能应该尽可能少的修改到已有功能；
   3. 易于维护：需求发生变化，需要修改的地方应该尽可能的少；
   4. 高效：尽可能在已有条件下进行更高效的设计，包括硬件上的，时间、空间复杂度上的；
   5. 可以重用：每次软件硬件设计应该可以进行积累，使得下次项目可以最小修改的情况下重用；

   当然要做到上面几点，需要多学习前人的经典设计，多参考经典案例，多加积累，非一蹴而就。

### 时序图

![spi](.\images\spi.png)

### 驱动编写

读芯片手册

### 常用通讯协议

- UART
- I2C
- SPI

##提高篇

### 数据结构与算法设计

​	虽然现在微处理器在内存大小及处理速度相对以前有了很大的提高，数据结构和算法变得没有以前要求那么高，可以通过提高硬件规格来弥补算法上的劣势，但是在一些极端的场合下，一些复杂的应用场景使得并不能够通过提高硬件来获得较大的性能改善，而且性能提高，成本和功耗都会显著提高，这对产品是非常不利的，所以在嵌入式设备上，数据结构与算法尤为重要。这些方面的知识几天几夜都讲不完，还好这些方面有大量的书籍可供参考，参考书目里已经包含这部分基础内容。

### 合作式调度器设计

#### 常见程序框架

```c
int main()
{
  sys_init();
  while(1)
  {
    update_sensors();
    make_decision();
    execute_decision();
  }
}
```

这是自动控制系统的经典框架，一般任务已经可以胜任了。

#### 有什么问题？

while循环执行一次需要多少时间？

如果其中某个环节耗时非常久会怎么样？

如果需要执行多个对时间有精确时序要求的任务应该怎么办？

解决办法?

分时复用。

### 大型项目文件管理

#### 软件工程

#### 设计模式

#### GIT的使用

​	这部分的知识并不仅限于代码的编写，实际上是为了解决项目大了之后各个部分耦合过于严重，导致后期扩展及维护会产生很大的开销，这些内容在项目大了之后才会显现出来，比如代码行数达到数万行，又比如需要数十人同时协作开发一个项目。这部分知识远远超出本文内容，只是用于给大家了解，当以后遇到这些问题了，知道灯塔在何处。

### 安全性问题

​	知识产权的保护在当今越发的重要，辛苦多年的结晶可能人家几天就成功剽窃。通过专利等方式进行保护当然是非常重要的环节，但是如果自己适当的提高他人抄袭的门槛，就能很大限度上保护我们的产品。

防止硬件破解？

防止非法修改存储数据？

防止通信数据被截获？甚至修改？

<div style="page-break-after: always;"></div>

## 参考书目



| [![爱上Arduino（第2版）](http://img13.360buyimg.com/n7/g9/M03/07/19/rBEHaVBinhYIAAAAAABth9Z26j4AABhfgDej2QAAG2f523.jpg)](http://item.jd.com/11097323.html) | [![嵌入式系统设计与实践封面](http://img12.360buyimg.com/n1/s200x200_g15/M02/01/0F/rBEhWlG-lWcIAAAAAAG0Bz3i2l8AAASpgPA3ckAAbQf238.jpg)](http://item.jd.com/1626458326.html) | [![STM32库开发实战指南](http://img13.360buyimg.com/n1/s200x200_jfs/t2518/129/913544251/260698/70dee052/56724f82N2424d77c.jpg)](http://item.jd.com/11273708.html) | [![Altium Designer原理图与PCB设计（第3版）](http://img14.360buyimg.com/n1/s200x200_jfs/t2449/242/366990962/200888/fce5b759/56026964N0c89658b.jpg)](http://item.jd.com/11768609.html) |
| ---------------------------------------- | ---------------------------------------- | ---------------------------------------- | ---------------------------------------- |
| [![爱上Raspberry Pi（第2版）](http://img12.360buyimg.com/n1/s200x200_jfs/t2977/224/893238896/568923/ce46b408/576b521eNf7026833.jpg)](http://item.jd.com/11969202.html) | [![C Primer Plus 第6版 中文版](http://img12.360buyimg.com/n1/s200x200_jfs/t2851/14/1309443716/77855/47617a5e/573ab66eNe797b873.jpg)](http://item.jd.com/11917487.html) | [![现代软件工程：构建之法（第二版））](http://img13.360buyimg.com/n1/s200x200_jfs/t1954/1/1094687085/100921/ab2348f0/5670fe62Nd3989bbd.jpg)](http://item.jd.com/11733233.html) | [![数据结构与算法分析：C语言描述（原书第2版）](http://img11.360buyimg.com/n1/s200x200_15417/d3adcc21-09a4-4d66-8bed-d8c8ee04e684.jpg)](http://item.jd.com/10057441.html) |
| [![手把手教你学51单片机（C语言版）](http://img11.360buyimg.com/n1/s200x200_jfs/t2752/347/1392584966/124534/e099fb9c/573d6a19Nd42fe700.jpg)](http://item.jd.com/11446466.html) | [![Arduino权威指南（第2版）](http://img11.360buyimg.com/n1/s200x200_jfs/t1879/102/2821381138/124073/c6515806/56eb781eNf9d8fd19.jpg)](http://item.jd.com/11666296.html) | [![基于AVR单片机的控制系统设计](http://img13.360buyimg.com/n1/s200x200_jfs/t2392/310/1955170826/196834/29147518/56e65c88Nca67092d.jpg)](http://item.jd.com/11883948.html) |                                          |

